<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Data</title>
</head>

<body>
    <h1>Search Booking Data</h1>

    <form id="bookingForm" action="finalfile.php" method="get">
        <label for="banquet_id">Banquet ID:</label>
        <input type="number" id="banquet_id" name="banquet_id" required>
        <br><br>

        <label for="start_date">Start Date:</label>
        <input type="date" id="start_date" name="start_date" required>
        <br><br>

        <label for="end_date">End Date:</label>
        <input type="date" id="end_date" name="end_date" required>
        <br><br>

        <!-- View File Button: Submits the form for viewing the data -->
        <button type="submit">View File</button>

        <!-- Download File Button: Initiates the download dynamically -->
        <button type="button" id="downloadBtn">Download File</button>
    </form>

    <script>
        document.getElementById('downloadBtn').addEventListener('click', function () {
            // Get form values
            var banquetId = document.getElementById('banquet_id').value;
            var startDate = document.getElementById('start_date').value;
            var endDate = document.getElementById('end_date').value;

            // Ensure all fields are filled
            if (banquetId && startDate && endDate) {
                // Construct the URL for file download
                var downloadUrl = 'finalfile.php?banquet_id=' + encodeURIComponent(banquetId) +
                    '&start_date=' + encodeURIComponent(startDate) +
                    '&end_date=' + encodeURIComponent(endDate) +
                    '&download=true';

                // Redirect to the download URL
                window.location.href = downloadUrl;
            } else {
                alert("Please fill in all fields before downloading.");
            }
        });
    </script>
</body>

</html>